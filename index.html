<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>StudySpark</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{
      height:100%;
      width:100%;
      overflow:hidden;
      background:#000;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;
      color:#fff;
      touch-action:none;
      overscroll-behavior:none;
      -webkit-user-select:none;
      user-select:none;
    }

    .title {
      position:absolute;
      top:20px;left:0;right:0;
      text-align:center;
      font-weight:800;
      letter-spacing:2px;
      text-transform:uppercase;
      font-size:18px;
      z-index:10;
      pointer-events:none;
    }

    .card {
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:30px;
      transition: transform 0.6s cubic-bezier(.25,.8,.25,1), opacity 0.4s ease;
      font-weight:800;
      line-height:1.1;
      font-size:clamp(20px,4vw,34px);
      cursor:pointer;
      user-select:none;
      will-change:transform,opacity;
    }

    /* vibrant backgrounds */
    .card[data-index="0"] { background: linear-gradient(135deg,#ff512f 0%,#dd2476 100%); }
    .card[data-index="1"] { background: linear-gradient(135deg,#f7971e 0%,#ffd200 100%); color:#111; }
    .card[data-index="2"] { background: linear-gradient(135deg,#00c6ff 0%,#0072ff 100%); }

    .hint {
      position:absolute;
      bottom:16px;left:0;right:0;
      text-align:center;
      font-size:12px;
      color:rgba(255,255,255,0.85);
      opacity:0.9;
      z-index:10;
    }

    @media (max-width:520px){
      .title{font-size:14px}
      .hint{font-size:11px}
      .card{padding:20px;font-size:clamp(18px,5vw,28px)}
    }
  </style>
</head>
<body>
  <div class="title">StudySpark</div>

  <div class="card" id="cardA" data-index="0"><div class="text">Loading…</div></div>
  <div class="card" id="cardB" data-index="1"><div class="text">Loading…</div></div>
  <div class="card" id="cardC" data-index="2"><div class="text">Loading…</div></div>

  <div class="hint">Tap anywhere to see the next quote</div>

  <script>
  (function(){
    const fallback = [
      "Study while others sleep, dream while others procrastinate.",
      "Success is no accident; it’s hard work, perseverance, learning and studying.",
      "Don’t wish it were easier; wish you were better."
    ];

    let dailyThree = null;
    try {
      if (Array.isArray(window.quotes) && window.quotes.length >= 3) {
        const today = new Date();
        const key = `${today.getUTCFullYear()}-${today.getUTCMonth()+1}-${today.getUTCDate()}`;
        let h = 0; for (let i=0;i<key.length;i++) h = (h<<5)-h + key.charCodeAt(i);
        h = Math.abs(h);
        const chosen = [];
        let base = h % window.quotes.length;
        for (let i=0;i<3;i++){
          chosen.push(String(window.quotes[(base + i*37) % window.quotes.length]));
        }
        dailyThree = chosen;
      }
    } catch(e){}
    if (!dailyThree) dailyThree = fallback.slice(0,3);

    const cards = [
      document.getElementById('cardA'),
      document.getElementById('cardB'),
      document.getElementById('cardC')
    ];

    cards.forEach((c,i)=>{
      c.querySelector('.text').innerText = dailyThree[i];
      c.style.transform = i === 0 ? 'translateX(0)' : 'translateX(100%)';
    });

    let current = 0;
    const total = cards.length;

    function showCard(i){
      cards.forEach((c,idx)=>{
        if(idx === i){ 
          c.style.transform = 'translateX(0)'; 
          c.style.opacity = '1'; 
        }
        else{
          c.style.transform = 'translateX(-100%)';
          c.style.opacity = '0';
        }
      });
    }

    function nextCard(){
      const prev = current;
      current = (current + 1) % total;

      // Move the new card into view from the right
      cards[current].style.transition = 'none';
      cards[current].style.transform = 'translateX(100%)';
      requestAnimationFrame(()=>{
        cards[current].style.transition = 'transform 0.6s cubic-bezier(.25,.8,.25,1), opacity 0.4s ease';
        cards[prev].style.transform = 'translateX(-100%)';
        cards[current].style.transform = 'translateX(0)';
        cards[current].style.opacity = '1';
      });
    }

    document.body.addEventListener('click', nextCard);
    window.addEventListener('keydown', e=>{ if(e.key===' '||e.key==='ArrowRight') nextCard(); });

    ['gesturestart','gesturechange','gestureend','wheel','touchmove'].forEach(evt=>{
      document.addEventListener(evt, e => {
        if (e.scale !== undefined || e.touches?.length > 1 || e.ctrlKey) e.preventDefault();
      }, {passive:false});
    });
  })();
  </script>
</body>
</html>
